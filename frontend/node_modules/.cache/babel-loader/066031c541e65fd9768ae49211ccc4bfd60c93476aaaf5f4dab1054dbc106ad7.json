{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport areArraysEqual from '../utils/areArraysEqual';\n\n/**\n * Gets the current state. If the selectedValue is controlled,\n * the `value` prop is the source of truth instead of the internal state.\n */\nfunction getControlledState(internalState, props) {\n  if (props.value !== undefined) {\n    return _extends({}, internalState, {\n      selectedValue: props.value\n    });\n  }\n  return internalState;\n}\nfunction areOptionsEqual(option1, option2, optionComparer) {\n  if (option1 === option2) {\n    return true;\n  }\n  if (option1 === null || option2 === null) {\n    return false;\n  }\n  return optionComparer(option1, option2);\n}\n\n/**\n * Triggers change event handlers when reducer returns changed state.\n */\nfunction useStateChangeDetection(nextState, internalPreviousState, propsRef, lastActionRef) {\n  React.useEffect(() => {\n    if (!propsRef.current || lastActionRef.current === null) {\n      // Detect changes only if an action has been dispatched.\n      return;\n    }\n    const previousState = getControlledState(internalPreviousState, propsRef.current);\n    const {\n      multiple,\n      optionComparer\n    } = propsRef.current;\n    if (multiple) {\n      var _previousState$select;\n      const previousSelectedValues = (_previousState$select = previousState == null ? void 0 : previousState.selectedValue) != null ? _previousState$select : [];\n      const nextSelectedValues = nextState.selectedValue;\n      const onChange = propsRef.current.onChange;\n      if (!areArraysEqual(nextSelectedValues, previousSelectedValues, optionComparer)) {\n        onChange == null ? void 0 : onChange(lastActionRef.current.event, nextSelectedValues);\n      }\n    } else {\n      const previousSelectedValue = previousState == null ? void 0 : previousState.selectedValue;\n      const nextSelectedValue = nextState.selectedValue;\n      const onChange = propsRef.current.onChange;\n      if (!areOptionsEqual(nextSelectedValue, previousSelectedValue, optionComparer)) {\n        onChange == null ? void 0 : onChange(lastActionRef.current.event, nextSelectedValue);\n      }\n    }\n\n    // Fires the highlightChange event when reducer returns changed `highlightedValue`.\n    if (!areOptionsEqual(internalPreviousState.highlightedValue, nextState.highlightedValue, propsRef.current.optionComparer)) {\n      var _propsRef$current, _propsRef$current$onH;\n      (_propsRef$current = propsRef.current) == null ? void 0 : (_propsRef$current$onH = _propsRef$current.onHighlightChange) == null ? void 0 : _propsRef$current$onH.call(_propsRef$current, lastActionRef.current.event, nextState.highlightedValue);\n    }\n    lastActionRef.current = null;\n  }, [nextState.selectedValue, nextState.highlightedValue, internalPreviousState, propsRef, lastActionRef]);\n}\nexport default function useControllableReducer(internalReducer, externalReducer, props) {\n  var _ref;\n  const {\n    value,\n    defaultValue\n  } = props;\n  const propsRef = React.useRef(props);\n  propsRef.current = props;\n  const actionRef = React.useRef(null);\n  const initialSelectedValue = (_ref = value === undefined ? defaultValue : value) != null ? _ref : props.multiple ? [] : null;\n  const initialState = {\n    highlightedValue: null,\n    selectedValue: initialSelectedValue\n  };\n  const combinedReducer = React.useCallback((state, action) => {\n    actionRef.current = action;\n    if (externalReducer) {\n      return externalReducer(getControlledState(state, propsRef.current), action);\n    }\n    return internalReducer(getControlledState(state, propsRef.current), action);\n  }, [externalReducer, internalReducer, propsRef]);\n  const [nextState, dispatch] = React.useReducer(combinedReducer, initialState);\n  const previousState = React.useRef(initialState);\n  React.useEffect(() => {\n    previousState.current = nextState;\n  }, [previousState, nextState]);\n  useStateChangeDetection(nextState, previousState.current, propsRef, actionRef);\n  return [getControlledState(nextState, propsRef.current), dispatch];\n}","map":{"version":3,"names":["_extends","React","areArraysEqual","getControlledState","internalState","props","value","undefined","selectedValue","areOptionsEqual","option1","option2","optionComparer","useStateChangeDetection","nextState","internalPreviousState","propsRef","lastActionRef","useEffect","current","previousState","multiple","_previousState$select","previousSelectedValues","nextSelectedValues","onChange","event","previousSelectedValue","nextSelectedValue","highlightedValue","_propsRef$current","_propsRef$current$onH","onHighlightChange","call","useControllableReducer","internalReducer","externalReducer","_ref","defaultValue","useRef","actionRef","initialSelectedValue","initialState","combinedReducer","useCallback","state","action","dispatch","useReducer"],"sources":["C:/Users/shino/Documents/WEB PROJECTS/LMS/frontend/node_modules/@mui/base/ListboxUnstyled/useControllableReducer.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport areArraysEqual from '../utils/areArraysEqual';\n\n/**\n * Gets the current state. If the selectedValue is controlled,\n * the `value` prop is the source of truth instead of the internal state.\n */\nfunction getControlledState(internalState, props) {\n  if (props.value !== undefined) {\n    return _extends({}, internalState, {\n      selectedValue: props.value\n    });\n  }\n  return internalState;\n}\nfunction areOptionsEqual(option1, option2, optionComparer) {\n  if (option1 === option2) {\n    return true;\n  }\n  if (option1 === null || option2 === null) {\n    return false;\n  }\n  return optionComparer(option1, option2);\n}\n\n/**\n * Triggers change event handlers when reducer returns changed state.\n */\nfunction useStateChangeDetection(nextState, internalPreviousState, propsRef, lastActionRef) {\n  React.useEffect(() => {\n    if (!propsRef.current || lastActionRef.current === null) {\n      // Detect changes only if an action has been dispatched.\n      return;\n    }\n    const previousState = getControlledState(internalPreviousState, propsRef.current);\n    const {\n      multiple,\n      optionComparer\n    } = propsRef.current;\n    if (multiple) {\n      var _previousState$select;\n      const previousSelectedValues = (_previousState$select = previousState == null ? void 0 : previousState.selectedValue) != null ? _previousState$select : [];\n      const nextSelectedValues = nextState.selectedValue;\n      const onChange = propsRef.current.onChange;\n      if (!areArraysEqual(nextSelectedValues, previousSelectedValues, optionComparer)) {\n        onChange == null ? void 0 : onChange(lastActionRef.current.event, nextSelectedValues);\n      }\n    } else {\n      const previousSelectedValue = previousState == null ? void 0 : previousState.selectedValue;\n      const nextSelectedValue = nextState.selectedValue;\n      const onChange = propsRef.current.onChange;\n      if (!areOptionsEqual(nextSelectedValue, previousSelectedValue, optionComparer)) {\n        onChange == null ? void 0 : onChange(lastActionRef.current.event, nextSelectedValue);\n      }\n    }\n\n    // Fires the highlightChange event when reducer returns changed `highlightedValue`.\n    if (!areOptionsEqual(internalPreviousState.highlightedValue, nextState.highlightedValue, propsRef.current.optionComparer)) {\n      var _propsRef$current, _propsRef$current$onH;\n      (_propsRef$current = propsRef.current) == null ? void 0 : (_propsRef$current$onH = _propsRef$current.onHighlightChange) == null ? void 0 : _propsRef$current$onH.call(_propsRef$current, lastActionRef.current.event, nextState.highlightedValue);\n    }\n    lastActionRef.current = null;\n  }, [nextState.selectedValue, nextState.highlightedValue, internalPreviousState, propsRef, lastActionRef]);\n}\nexport default function useControllableReducer(internalReducer, externalReducer, props) {\n  var _ref;\n  const {\n    value,\n    defaultValue\n  } = props;\n  const propsRef = React.useRef(props);\n  propsRef.current = props;\n  const actionRef = React.useRef(null);\n  const initialSelectedValue = (_ref = value === undefined ? defaultValue : value) != null ? _ref : props.multiple ? [] : null;\n  const initialState = {\n    highlightedValue: null,\n    selectedValue: initialSelectedValue\n  };\n  const combinedReducer = React.useCallback((state, action) => {\n    actionRef.current = action;\n    if (externalReducer) {\n      return externalReducer(getControlledState(state, propsRef.current), action);\n    }\n    return internalReducer(getControlledState(state, propsRef.current), action);\n  }, [externalReducer, internalReducer, propsRef]);\n  const [nextState, dispatch] = React.useReducer(combinedReducer, initialState);\n  const previousState = React.useRef(initialState);\n  React.useEffect(() => {\n    previousState.current = nextState;\n  }, [previousState, nextState]);\n  useStateChangeDetection(nextState, previousState.current, propsRef, actionRef);\n  return [getControlledState(nextState, propsRef.current), dispatch];\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}